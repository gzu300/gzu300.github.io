---
title: 'Three Musketeers' in bash
date: 2020-09-09
---
## `sed`
### Synopsis
`sed [command line flags] command [file]`  
`command` has different components: `[address1[,address2]]function[arguments]`  
addresses mean the line range or pattern of the input file. For example `sed 1,100 s/abc/ABC/ example.txt`. `1,100` are the 2 addresses.  
functions may receive 0, 1 or 2 addresses. represented by 0addr, 1addr or 2addr in the below text.  
pattern space: the current matched line is buffered into pattern space except for some special commands.  
hold space: the pattern to be matched
#### common one-line functions
1. `[1addr[,2addr]] s/regex/pattern/flags`  
flags:  
N: is the number, meaning the N th occurance  
g: make change to all non-overlapping matched pattern  
p: print to output when replacement made.  
w: write to a file if replacement made.  
2. `[1addr]a\`  
`text`  
append the text below the matched line.
3. `[1addr[,2addr]]c\`  
`text`  
replace the current line with `text`. **if addresse is a range, then replace the range with one single line of text**. 
4. `[1addr]i\`
`text`
insert the text above the matched line.
#### command line flags
`-e` when considering multiple arguments for commands, use it.
#### advanced one-line functions on pattern and hold spaces
`g` replace hold space with pattern space. `G` append pattern space to hold space.  
`h` replace pattern space to hold space. `H` append hold space to pattern space.
`d` and `D` deletes the current pattern space.
`e` exchange hold and pattern space.
#### advanced multiple-line function
`N` `P` `D` commands includes the next line till by including newline character into buffer. So it operates on multiple lines. refer to manual when need this function.
### summary
#### `sed` is a **stream** editer for **transforming** and **filtering** input text.
#### the synopsis of `sed` is always `command-line flags`+`[address] function|{functions} [arguments]`+`< input file` + `> output file`
#### the most common and useful command in sed is the s command. make well used of it.

## `awk`
